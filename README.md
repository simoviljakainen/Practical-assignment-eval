# PracticalAssignmentEvaluator
This program is for evaluating C-programming practical assignments. For the best results, a GNU/Linux environment is recommended. Note that malicious students could inject shell commands (e.g. in the Makefile), so it is adviced to run the program in a virtual machine.

Following tests have been implemented into this version:
1. *Student information check*. This will check if the right student number is given (in right format) in all of the source code files.
2. *Global variable check*. This test finds any varibles (and constants) that are in global scope from object files.
3. *Memory-leak check*. This test finds and reports any memory leaks found in the submission.
4. *File exception check*. Any fopen (or open) that is not compared to a NULL return value is reported.
5. *Alloc exception check*. Any malloc, realloc, calloc that is not compared to a NULL return value is reported.
6. *Output check*. Compares the submission output to the solutions output.

## Notes
* Needed solution output(s) can be generated with the program. 
* With parseDirs.py and Moodle student list export, Moodle assignment directories can be renamed as the student numbers respectively. The syntax is `Python3 parseDirs.py studentListExport.csv submissionDirectory` (submissionDirectory is optional as the *submissions* is used by default).

## Dependencies
### libxml2
	sudo apt install libxml2
	sudo apt install libxml2-dev
### Valgrind
	sudo apt install valgrind
### gcc
	sudo apt install gcc
### make
	sudo apt install make

### The program also uses
* find
* nm
* diff
* grep
* Basic shell commands (cd, cp, mv, cut, wc, rm)

## Usage
### Compiling commands
#### make
Compile the program.
#### make clean
Clean all objects and binaries. If you make any changes to header files, remember to clean before compiling to see the changes.
#### make run
Run the compiled program through Valgrind.
#### make cm
Clean and make.
### Commandline options
The binary takes one mandatory option -n as for the student number when evaluating a submission. If a -f option is provided, the program checks the assignment as it most advanced level. Without -f the run is for the basic level submissions. To generate new solution output use flag -g. New output will be generated according to the solutions placed in solutions directory. By default, student provided makefile is used. With a flag -m makefile from the directory testmake (can be changed in ***Config.h***) is used instead.
#### Example
>./evaluate -n 452075
## Structure
	.
	├── inc
	├── obj
	├── src
	└── test
	    ├── data
	    ├── evaluate
	    ├── expected
	    │   ├── output
	    │   │   ├── advanced
	    │   │   └── basic
	    │   ├── solutions
	    │   │   ├── advanced
	    │   │   └── basic
	    │   └── testmake
	    ├── input
	    ├── output
	    ├── submissions
	    │   ├── 00000
	    │   ├── 00001
	    │   ├── 00002
	    │   └── 452075
	    └── valgrind

### inc
This directory contains all of the header files. ***Config.h*** file contains constant strings, commands and environment configurations.
### obj
This directory is for object files created during compilation.
### src
This directory has all of the source code files.
### test
This directory is for files that are used during the tests.
1. **data**
Here you can add/find data that the practical assignment uses.
2. **evaluate**
This is the directory where the student submission is transfered and compiled for the tests.
3. **expected**
Here is where the assignment's solution files reside.
   * **output**
This folder is for correct output that is generated by running the predefined input with right solutions.
   * **solutions**
In this directory are the solution's source codes. Note that a Makefile is needed to generate the solution output with the -g option. The produced binary should be named according to binary name given in ***Config.h***.
4. **input**
In this directory you can find the test run inputs. The used files can be defined in ***Config.h***.
5. **output**
Output from the student's program is stored here.
6. **submissions**
All of the student submissions should be put into this folder (the used folder can be defined in ***Config.h***). Each of the submissions should be in a separate folder, named as the student number.
7. **valgrind**
Valgrind output is stored here.

